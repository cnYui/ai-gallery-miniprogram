<view class="container" data-theme="{{theme}}">
  <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
  <view class="theme-toggle" bind:tap="onThemeToggle">
    <text class="theme-icon">{{theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™'}}</text>
  </view>
  
  <!-- åŠ è½½ä¸­çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{isLoading}}">
    <t-loading theme="circular" size="80rpx" text="{{taskStatus === 'PENDING' ? 'ä»»åŠ¡æ’é˜Ÿä¸­...' : taskStatus === 'RUNNING' ? 'æ­£åœ¨ç”Ÿæˆå›¾ç‰‡...' : 'æ­£åœ¨å¤„ç†...'}}" inherit-color></t-loading>
    <view class="status-text">ä»»åŠ¡çŠ¶æ€ï¼š{{taskStatus || 'æŸ¥è¯¢ä¸­'}}</view>
  </view>
  
  <!-- é”™è¯¯çŠ¶æ€ -->
  <view class="error-container" wx:elif="{{errorMessage}}">
    <view class="error-icon">âš ï¸</view>
    <view class="error-text">{{errorMessage}}</view>
    <view class="error-actions">
      <t-button 
        theme="primary" 
        size="medium" 
        icon="refresh" 
        bind:tap="onRegenerateTap"
        loading="{{isRegenerating}}"
      >{{isRegenerating ? 'é‡æ–°ç”Ÿæˆä¸­...' : 'é‡æ–°ç”Ÿæˆ'}}</t-button>
      <t-button 
        theme="light" 
        size="medium" 
        variant="outline"
        bind:tap="onBackToCreate"
      >è¿”å›åˆ›ä½œ</t-button>
    </view>
  </view>
  
  <!-- ç»“æœå±•ç¤º -->
  <view class="result-content" wx:else>
    <view class="result-card card">
      <view class="image-container">
        <image class="result-image" src="{{imageUrl}}" mode="aspectFill" show-menu-by-longpress bind:tap="previewImage"></image>
      </view>
      <view class="prompt-container">
        <view class="prompt-label">æç¤ºè¯</view>
        <view class="prompt-text">{{prompt}}</view>
        <view class="prompt-label" wx:if="{{negativePrompt}}">åå‘æç¤ºè¯</view>
        <view class="prompt-text" wx:if="{{negativePrompt}}">{{negativePrompt}}</view>
      </view>
    </view>
    
    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <t-button 
        theme="light" 
        size="large" 
        variant="outline"
        icon="refresh" 
        block 
        class="regenerate-btn"
        bind:tap="onRegenerateTap"
        loading="{{isRegenerating}}"
      >{{isRegenerating ? 'é‡æ–°ç”Ÿæˆä¸­...' : 'é‡æ–°ç”Ÿæˆ'}}</t-button>
      
      <t-button 
        theme="primary" 
        size="large" 
        icon="upload" 
        block 
        class="publish-btn"
        bind:tap="onPublishTap"
        loading="{{isPublishing}}"
      >{{isPublishing ? 'å‘å¸ƒä¸­...' : 'å‘å¸ƒåˆ°ç”»å»Š'}}</t-button>
      
      <t-button 
        theme="light" 
        size="large" 
        icon="arrow-left" 
        block 
        class="back-btn"
        bind:tap="onBackToCreate"
      >è¿”å›åˆ›ä½œ</t-button>
    </view>
  </view>
  
  <!-- æç¤ºæ¶ˆæ¯ -->
  <t-toast id="t-toast" />
</view>